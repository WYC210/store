(function(){"use strict";var e={4180:function(e,t,a){a.d(t,{KU:function(){return s},N4:function(){return c},Tg:function(){return n},fS:function(){return o},n7:function(){return l}});var r=a(5720);const o=async e=>{console.log("发送创建订单请求:",e);const t=await(0,r.A)({url:"/orders/purchase/direct",method:"POST",data:e});if(200===t.state)return console.log("创建订单响应:",t),t.data;throw new Error(t.message||"创建订单失败")},n=async(e,t)=>{console.log("发送支付订单请求:",{orderId:e,paymentData:t});const a=await(0,r.A)({url:`/orders/${e}/pay`,method:"POST",data:t});if(200===a.state)return console.log("支付订单响应:",a),a;throw new Error(a.message||"支付订单失败")},l=async(e={})=>{console.log("发送获取订单列表请求:",e);const t=await(0,r.A)({url:"/orders",method:"get",params:e});return console.log("获取订单列表响应:",t),t},s=async e=>{console.log("发送获取订单详情请求:",e);const t=await(0,r.A)({url:`/orders/${e}`,method:"GET"});if(200===t.state)return console.log("获取订单详情响应:",t),t.data;throw new Error(t.message||"获取订单详情失败")},c=e=>(0,r.A)({url:`/orders/${e}/cancel`,method:"post"}),i=async(e,t)=>{console.log("发送直接购买请求:",{productId:e,quantity:t});const a=await(0,r.A)({url:"/orders/create/direct",method:"POST",data:{items:{productId:String(e),quantity:t}}});if(console.log("直接购买响应:",a),200===a.state)return a.data;throw new Error(a.message||"创建订单失败")},u={createOrder:o,payOrder:n,getOrderList:l,getOrderDetail:s,purchaseDirectly:i};t.Ay=u},3230:function(e,t,a){var r=a(5130),o=a(6768);a(8992),a(3949);const n=Symbol("animation");function l(){const e=new Map,t=t=>{if(!t)return;const a=t.querySelectorAll(".logo-path");a.forEach((t=>{const a=t.getTotalLength();t.style.strokeDasharray=a,t.style.strokeDashoffset=a,e.set(t,{length:a})}))},a=()=>{e.forEach(((e,t)=>{t&&t.style&&(t.style.animation="none",t.style.removeProperty("stroke-dasharray"),t.style.removeProperty("stroke-dashoffset"))})),e.clear()};return{registerSvgAnimation:t,cleanup:a}}function s(){const e=l();return(0,o.Gt)(n,e),e}var c=a(4783),i=a(6662),u=a(3840),d=a(505);const m={class:"dream-theme"};var p={__name:"App",setup(e){const t=s(),a=(0,c.k)(),r=((0,i.x)(),(0,u.n)()),{isDarkTheme:n}=(0,d.D)();return(0,o.hi)((()=>{t.cleanup()})),(0,o.sV)((async()=>{try{const e=document.cookie.includes("AUTH-TOKEN");e&&await a.validateToken(),await r.fetchCategories()}catch(e){console.error("Error during initialization:",e)}})),(e,t)=>{const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)(a)])}}};const g=p;var v=g,h=a(4218),k=a(7933),f=a(7477),b=a(2261);a(4188);const y=(0,r.Ef)(v),_=(0,b.Ey)();for(const[w,I]of Object.entries(f))y.component(w,I);y.use(k.A),y.use(h.A),y.use(_),y.mount("#app")},4218:function(e,t,a){a.d(t,{A:function(){return or}});var r={};a.r(r),a.d(r,{A:function(){return g}});var o=a(973),n=a(6768),l=a(4232),s=a(144),c=a(505),i=(a(4114),a.p+"img/logo_w.2b0242fe.png"),u=a(4783),d=(a(8992),a(4520),a(1454),a(8872),a(2261)),m=a(5720);const p={getCartItems:async()=>{console.log("发送请求: 获取购物车商品列表");const e=await(0,m.A)({url:"/cart/list",method:"GET"});if(console.log("获取购物车商品列表响应:",e),200===e.state)return e.data;throw new Error(e.message||"获取购物车商品列表失败")},addToCart:async e=>{if(!e.productId)throw new Error("商品ID不能为空");const t=await(0,m.A)({url:"/cart/add",method:"POST",data:{productId:String(e.productId),quantity:e.quantity}});if(200===t.state)return t.data;throw new Error(t.message||"添加到购物车失败")},updateCartItem:async(e,t)=>{console.log("发送请求: 更新购物车商品",{cartItemId:e,quantity:t});const a=await(0,m.A)({url:`/cart/update/${e}`,method:"PUT",data:{quantity:t}});if(console.log("更新购物车商品响应:",a),200===a.state)return a.data;throw new Error(a.message||"更新购物车商品失败")},deleteCartItem:async e=>{console.log("发送请求: 删除购物车商品",e);const t=await(0,m.A)({url:`/cart/delete/${e}`,method:"DELETE"});if(console.log("删除购物车商品响应:",t),200!==t.state)throw new Error(t.message||"删除购物车商品失败")},clearCart:async()=>{console.log("发送请求: 清空购物车");const e=await(0,m.A)({url:"/cart/clear",method:"DELETE"});if(console.log("清空购物车响应:",e),200!==e.state)throw new Error(e.message||"清空购物车失败")},getCartTotal:async()=>(0,m.A)({url:"/cart/total",method:"GET"}),purchase:async e=>(0,m.A)({url:"/orders/purchase",method:"POST",data:e})};var g=p;const v=(0,d.nY)("cart",{state:()=>({cartItems:(0,s.KR)([]),totalCount:0,loading:!1,error:null}),getters:{totalItems:e=>e.cartItems.length,selectedItems:e=>e.cartItems.filter((e=>e.selected)),totalPrice:e=>e.cartItems.reduce(((e,t)=>t.selected?e+t.product.price*t.quantity:e),0)},actions:{async fetchCartItems(e){try{if(!Array.isArray(e))throw console.error("购物车数据格式错误:",e),new Error("购物车数据格式错误");this.cartItems=e.map((e=>({...e,selected:!1,id:e.cartItemId}))),this.totalCount=this.cartItems.length}catch(t){throw console.error("处理购物车数据失败:",t),t}},async updateCartItem(e){try{const t=this.cartItems.findIndex((t=>t.id===e.id));-1!==t&&(this.cartItems[t]={...this.cartItems[t],...e})}catch(t){throw console.error("更新购物车商品失败:",t),t}},async removeCartItem(e){try{const t=this.cartItems.findIndex((t=>t.id===e));-1!==t&&(this.cartItems.splice(t,1),this.totalCount=this.cartItems.length)}catch(t){throw console.error("移除购物车商品失败:",t),t}},updateSelection(e){this.cartItems=e},clearCart(){this.cartItems=[]},async addItemToCart(e){this.loading=!0,this.error=null;try{const t=await(0,r.addToCart)(e);this.cartItems.push(t)}catch(t){throw this.error=t.message||"添加商品到购物车失败",t}finally{this.loading=!1}},setCartItems(e){this.cartItems=e}}});var h=a(7477);const k={class:"user-dropdown"};var f={__name:"UserDropdown",setup(e){const t=(0,o.rd)(),a=(0,u.k)(),r=e=>{switch(e){case"profile":t.push("/profile");break;case"orders":t.push("/profile/orders");break}};return(e,t)=>{const o=(0,n.g2)("el-icon"),c=(0,n.g2)("el-button"),i=(0,n.g2)("el-dropdown-item"),u=(0,n.g2)("el-dropdown-menu"),d=(0,n.g2)("el-dropdown");return(0,n.uX)(),(0,n.CE)("div",k,[(0,n.bF)(d,{trigger:"hover",onCommand:r},{dropdown:(0,n.k6)((()=>[(0,n.bF)(u,{class:"dream-dropdown"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{command:"profile"},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.UserFilled))])),_:1}),t[0]||(t[0]=(0,n.eW)(" 我的信息 "))])),_:1}),(0,n.bF)(i,{command:"orders"},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.List))])),_:1}),t[1]||(t[1]=(0,n.eW)(" 我的订单 "))])),_:1})])),_:1})])),default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"user-btn hologram-btn",type:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.User))])),_:1}),(0,n.eW)(" "+(0,l.v_)((0,s.R1)(a).userInfo?.username||"个人中心"),1)])),_:1})])),_:1})])}}},b=a(1241);const y=(0,b.A)(f,[["__scopeId","data-v-dc09e02a"]]);var _=y;const w={class:"header-content"},I={class:"nav-menu"},C={class:"user-area"};var F={__name:"HomeHeader",setup(e){const t=(0,o.rd)(),a=(0,u.k)(),r=v(),c=(0,s.KR)(!1),d=()=>{c.value=window.scrollY>0},m=()=>{t.push("/login")};return(0,n.sV)((()=>{window.addEventListener("scroll",d)})),(0,n.hi)((()=>{window.removeEventListener("scroll",d)})),(e,t)=>{const o=(0,n.g2)("router-link"),u=(0,n.g2)("el-icon"),d=(0,n.g2)("el-badge"),p=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("header",{class:(0,l.C4)(["header",{"header-fixed":c.value}])},[(0,n.Lk)("div",w,[(0,n.bF)(o,{to:"/home",class:"logo"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.Lk)("img",{src:i,alt:"Logo"},null,-1)]))),_:1}),(0,n.Lk)("nav",I,[(0,n.bF)(o,{to:"/home",class:"nav-item"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("首页")]))),_:1}),(0,n.bF)(o,{to:"/products",class:"nav-item"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("商品")]))),_:1}),(0,n.bF)(o,{to:"/cart",class:"nav-item"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{value:(0,s.R1)(r).totalCount,hidden:!(0,s.R1)(r).totalCount},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.ShoppingCart))])),_:1}),t[3]||(t[3]=(0,n.eW)(" 购物车 "))])),_:1},8,["value","hidden"])])),_:1})]),(0,n.Lk)("div",C,[(0,s.R1)(a).isLoggedIn?((0,n.uX)(),(0,n.Wv)(_,{key:0})):((0,n.uX)(),(0,n.Wv)(p,{key:1,type:"primary",class:"login-btn hologram-btn",onClick:m},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" 登录 ")]))),_:1}))])])],2)}}};const L=(0,b.A)(F,[["__scopeId","data-v-afbcfb80"]]);var E=L,A=a(5130),R=a(3840),x=a(1219);function S(){const e=(0,R.n)(),t=(0,s.KR)(null),a=(0,s.KR)([]),r=async()=>{try{await e.fetchCategories()}catch(t){console.error("获取分类失败:",t),x.nk.error(t.message||"获取分类失败")}},o=(0,n.EW)((()=>e.categories.filter((e=>!e.parentId)))),l=e=>{t.value=e},c=e=>{console.log("子分类点击:",e)};return{categories:o,categoriesLoading:(0,n.EW)((()=>e.loading)),activeCategory:t,activeCollapse:a,fetchCategories:r,handleCategoryClick:l,handleSubCategoryClick:c}}var X=a(1737);const T={key:0,class:"mobile-categories"},W={class:"mobile-sub-categories"},K=["onClick"],O={class:"sub-categories"},P=["onClick"];var D={__name:"CategoryMenu",props:{contentHeight:{type:[String,Number],default:"600"}},emits:["category-change"],setup(e,{emit:t}){const{categories:a,categoriesLoading:r,activeCategory:o,activeCollapse:c,fetchCategories:i,handleCategoryClick:u,handleSubCategoryClick:d}=S(),m=(0,X.GuJ)({mobile:768}),p=(0,n.EW)((()=>m.smaller("mobile"))),g=(0,s.KR)("0");let v=null;(0,n.sV)((async()=>{await i()}));const h=e=>{v&&clearTimeout(v),o.value=e},k=()=>{v&&(clearTimeout(v),v=null)},f=()=>{v=setTimeout((()=>{o.value=null}),200)},b=()=>{v=setTimeout((()=>{o.value=null}),200)};return(t,i)=>{const m=(0,n.g2)("el-collapse-item"),v=(0,n.g2)("el-collapse"),y=(0,n.g2)("el-menu-item"),_=(0,n.g2)("el-menu"),w=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("section",{class:"categories",style:(0,l.Tr)({height:`${parseInt(e.contentHeight)+48}px`})},[p.value?((0,n.uX)(),(0,n.CE)("div",T,[i[1]||(i[1]=(0,n.Lk)("h2",null,"商品分类",-1)),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(v,{modelValue:(0,s.R1)(c),"onUpdate:modelValue":i[0]||(i[0]=e=>(0,s.i9)(c)?c.value=e:null)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(a),(e=>((0,n.uX)(),(0,n.Wv)(m,{key:e.categoryId,title:e.name,name:e.categoryId},{default:(0,n.k6)((()=>[(0,n.Lk)("div",W,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.children,(e=>((0,n.uX)(),(0,n.CE)("span",{key:e.categoryId,class:"mobile-sub-category",onClick:t=>(0,s.R1)(d)(e)},(0,l.v_)(e.name),9,K)))),128))])])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue"])),[[w,(0,s.R1)(r)]])])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[i[2]||(i[2]=(0,n.Lk)("h2",null,"商品分类",-1)),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(_,{class:"category-menu","default-active":g.value,style:{height:"calc(100% - 60px)"}},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(a),(e=>((0,n.uX)(),(0,n.Wv)(y,{key:e.categoryId,index:String(e.categoryId),onMouseenter:t=>h(e),onMouseleave:f,onClick:t=>(0,s.R1)(u)(e)},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.name),1)])),_:2},1032,["index","onMouseenter","onClick"])))),128))])),_:1},8,["default-active"])),[[w,(0,s.R1)(r)]]),(0,n.bo)((0,n.Lk)("div",{class:"sub-menu",onMouseenter:k,onMouseleave:b},[(0,n.Lk)("h3",null,(0,l.v_)((0,s.R1)(o)?.name),1),(0,n.Lk)("div",O,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(o)?.children,(e=>((0,n.uX)(),(0,n.CE)("span",{key:e.categoryId,class:"sub-category",onClick:t=>(0,s.R1)(d)(e)},(0,l.v_)(e.name),9,P)))),128))])],544),[[A.aG,(0,s.R1)(o)&&(0,s.R1)(o).children?.length]])],64))],4)}}};const V=(0,b.A)(D,[["__scopeId","data-v-d3bc802a"]]);var N=V;const U={key:0,class:"carousel-container"},q={class:"image-slot"};var $={__name:"HomeCarousel",props:{contentHeight:{type:String,default:"400px"}},setup(e){const t=(0,s.KR)([{image:"carousel1.jpg",title:"轮播图1"},{image:"carousel2.jpg",title:"轮播图2"},{image:"carousel3.jpg",title:"轮播图3"}]),a=(0,X.GuJ)({mobile:768}),r=(0,n.EW)((()=>a.smaller("mobile"))),o=(0,s.KR)([]);(0,n.sV)((()=>{l()}));const l=async()=>{const e=await fetch("/api/items");o.value=await e.json()};return(a,o)=>{const l=(0,n.g2)("el-icon"),c=(0,n.g2)("el-image"),i=(0,n.g2)("el-carousel-item"),u=(0,n.g2)("el-carousel");return r.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",U,[(0,n.bF)(u,{interval:4e3,type:"card",height:e.contentHeight,class:"carousel","indicator-position":"outside",arrow:"always"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value,((e,t)=>((0,n.uX)(),(0,n.Wv)(i,{key:t},{default:(0,n.k6)((()=>[(0,n.bF)(c,{src:e.image,alt:e.title,fit:"cover",class:"carousel-image",loading:"lazy"},{error:(0,n.k6)((()=>[(0,n.Lk)("div",q,[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Picture))])),_:1})])])),_:2},1032,["src","alt"])])),_:2},1024)))),128))])),_:1},8,["height"])]))}}};const z=(0,b.A)($,[["__scopeId","data-v-31ab6314"]]);var M=z;const j=async(e={})=>{console.log("API请求参数:",e);const{pageNum:t=1,pageSize:a=10,keyword:r="",categoryId:o=null,sortField:n="default",sortOrder:l="desc"}=e;try{const e=await(0,m.A)({url:"/products",method:"get",params:{pageNum:t,pageSize:a,keyword:r,categoryId:o,sortField:n,sortOrder:l}});if(console.log("API响应:",e),e&&e.list)return e;throw new Error("返回的数据格式不正确")}catch(s){throw console.error("获取商品列表失败:",s),s}},B=async e=>{if(!e)throw new Error("商品ID不能为空");return(0,m.A)({url:`/products/${e}`,method:"get"})},G=async e=>{if(!e.productId)throw new Error("商品ID不能为空");return(0,m.A)({url:"/cart/add",method:"post",data:e})},H=async e=>{if(!e)throw new Error("商品ID不能为空");return(0,m.A)({url:`/products/${e}/details`,method:"get",params:{includeOptions:!0,includeComments:!0}})},Q=async e=>{if(!e)throw new Error("商品ID不能为空");return(0,m.A)({url:`/products/${e}/images`,method:"get",params:{limit:5}})};function Y(){const e=(0,s.KR)([]),t=(0,s.KR)(!1),r=(0,s.Kh)({total:0,pageSize:10,currentPage:1}),o=(0,s.Kh)({pageNum:1,pageSize:10,keyword:"",categoryId:null,sortField:"default",sortOrder:"desc"}),n=async()=>{t.value=!0;try{const t=await j(o);if(console.log("获取商品响应:",t),!t||!Array.isArray(t.list))throw console.error("返回的数据格式不正确:",t),new Error("获取商品列表失败：数据格式不正确");e.value=t.list.map((e=>({...e,productId:e.productId||e.id,name:e.name||"未命名商品",description:e.description||"暂无描述",price:Number(e.price)||0,rating:Number(e.rating)||0,reviewCount:Number(e.reviewCount)||0,stock:Number(e.stock)||0,createdTime:e.createdTime||(new Date).toISOString(),imageUrl:e.imageUrl?e.imageUrl.startsWith("http")?e.imageUrl:`http://localhost:8088${e.imageUrl}`:a(3206)}))),r.total=t.total||0,r.currentPage=t.pageNum||1,r.pageSize=t.pageSize||10,console.log("处理后的商品数据:",e.value)}catch(n){console.error("获取商品列表失败:",n),x.nk.error(n.message||"获取商品列表失败"),e.value=[]}finally{t.value=!1}},l=e=>{o.pageNum=e,n()},c=e=>{o.pageSize=e,o.pageNum=1,n()};return{products:e,loading:t,pagination:r,productParams:o,fetchProducts:n,handlePageChange:l,handleSizeChange:c}}var J=a(6301);const Z={key:0,class:"loading-overlay"},ee={key:1,class:"error-message"},te={class:"hover-card-sidebar"},ae=["onClick"],re={class:"hover-card-content"},oe={key:0,class:"content-images"},ne={class:"danmaku-container"},le={key:1,class:"content-intro"},se={class:"price"},ce={class:"description"},ie={class:"stock"},ue={key:2,class:"content-config"},de={key:3,class:"content-comments"},me={class:"comment-header"},pe={class:"username"},ge={class:"comment-content"},ve={class:"comment-time"};var he={__name:"ProductHoverCard",props:{product:{type:Object,required:!0},visible:{type:Boolean,default:!1}},emits:["mouseleave"],setup(e,{emit:t}){const a=e,r=[{key:"images",label:"图片",icon:h.Picture},{key:"intro",label:"介绍",icon:h.Document},{key:"config",label:"配置",icon:h.Tools},{key:"comments",label:"评论",icon:h.ChatDotRound}],o=(0,s.KR)("images"),c=(0,s.KR)([]),i=(0,s.KR)([]),u=(0,s.KR)({}),d=(0,s.KR)(!1),m=(0,s.KR)(null);let p=null;const g=()=>{a.product?.reviews?.length&&(p=setInterval((()=>{const e=a.product.reviews[Math.floor(Math.random()*a.product.reviews.length)];e&&i.value.push({id:Date.now(),content:e.content,style:{top:160*Math.random()+"px"}})}),2e3))},v=async()=>{if(a.product?.id){d.value=!0,m.value=null;try{const[e,t]=await Promise.all([H(a.product.id),Q(a.product.id)]);c.value=t.data||[],Object.assign(a.product,e.data)}catch(e){m.value="加载失败，请重试",console.error("Failed to load product details:",e)}finally{d.value=!1}}},k=e=>new Date(e).toLocaleString();return(0,n.sV)((()=>{a.visible&&(v(),g())})),(0,n.hi)((()=>{p&&clearInterval(p)})),(t,a)=>{const p=(0,n.g2)("el-spinner"),g=(0,n.g2)("el-icon"),v=(0,n.g2)("el-image"),f=(0,n.g2)("el-carousel-item"),b=(0,n.g2)("el-carousel"),y=(0,n.g2)("el-radio"),_=(0,n.g2)("el-radio-group"),w=(0,n.g2)("el-rate");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"product-hover-card",ref:"cardRef",onMouseleave:a[0]||(a[0]=e=>t.$emit("mouseleave"))},[d.value?((0,n.uX)(),(0,n.CE)("div",Z,[(0,n.bF)(p,{size:"medium"}),a[1]||(a[1]=(0,n.Lk)("span",null,"加载中...",-1))])):(0,n.Q3)("",!0),m.value?((0,n.uX)(),(0,n.CE)("div",ee,[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Warning))])),_:1}),(0,n.Lk)("span",null,(0,l.v_)(m.value),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",te,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(r,(e=>(0,n.Lk)("div",{key:e.key,class:(0,l.C4)(["sidebar-item",{active:o.value===e.key}]),onClick:t=>o.value=e.key},[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.icon)))])),_:2},1024),(0,n.Lk)("span",null,(0,l.v_)(e.label),1)],10,ae))),64))]),(0,n.Lk)("div",re,["images"===o.value?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.bF)(b,{height:"200px","indicator-position":"outside"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.id},{default:(0,n.k6)((()=>[(0,n.bF)(v,{src:e.url,fit:"cover"},null,8,["src"])])),_:2},1024)))),128))])),_:1}),(0,n.Lk)("div",ne,[(0,n.bF)(A.F,{name:"danmaku"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"danmaku-item",style:(0,l.Tr)(e.style)},(0,l.v_)(e.content),5)))),128))])),_:1})])])):(0,n.Q3)("",!0),"intro"===o.value?((0,n.uX)(),(0,n.CE)("div",le,[(0,n.Lk)("h3",null,(0,l.v_)(e.product.name),1),(0,n.Lk)("div",se,"¥"+(0,l.v_)(e.product.price.toFixed(2)),1),(0,n.Lk)("div",ce,(0,l.v_)(e.product.description),1),(0,n.Lk)("div",ie,"库存: "+(0,l.v_)(e.product.stock),1)])):(0,n.Q3)("",!0),"config"===o.value?((0,n.uX)(),(0,n.CE)("div",ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.product.options,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"config-item"},[(0,n.Lk)("h4",null,(0,l.v_)(e.name),1),(0,n.bF)(_,{modelValue:u.value[e.id],"onUpdate:modelValue":t=>u.value[e.id]=t},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.choices,(e=>((0,n.uX)(),(0,n.Wv)(y,{key:e.id,label:e.id},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])):(0,n.Q3)("",!0),"comments"===o.value?((0,n.uX)(),(0,n.CE)("div",de,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.product.reviews,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"comment-item"},[(0,n.Lk)("div",me,[(0,n.Lk)("span",pe,(0,l.v_)(e.username),1),(0,n.bF)(w,{modelValue:e.rating,"onUpdate:modelValue":t=>e.rating=t,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,n.Lk)("div",ge,(0,l.v_)(e.content),1),(0,n.Lk)("div",ve,(0,l.v_)(k(e.createdTime)),1)])))),128))])):(0,n.Q3)("",!0)])],544)),[[A.aG,e.visible]])}}};const ke=(0,b.A)(he,[["__scopeId","data-v-49ee01ec"]]);var fe=ke;a(3206);const be={class:"products"},ye={class:"product-info"},_e={class:"description"},we={class:"price"},Ie={class:"rating"},Ce={class:"review-count"},Fe={class:"stock"},Le={class:"pagination-container"};var Ee={__name:"ProductList",setup(e){const{products:t,loading:r,pagination:c,productParams:i,fetchProducts:u}=Y(),d=(0,o.rd)(),m=a(3206),p=(0,s.KR)(null),g=(0,s.KR)(!1),v=(0,s.KR)({x:0,y:0}),h=(0,n.EW)((()=>{const{x:e,y:t}=v.value;return{position:"fixed",left:`${e}px`,top:`${t}px`}})),k=(0,J.A)(((e,t)=>{if(!e||!t)return;const a=e.currentTarget;if(!a)return;console.log("触发商品悬浮框:",{product:t.name,position:{x:e.clientX,y:e.clientY},elementRect:a.getBoundingClientRect()});const r=a.getBoundingClientRect(),o=window.innerWidth,n=window.innerHeight;let l=r.left+r.width/2-250,s=r.top-420;l<20&&(l=20),l+500>o-20&&(l=o-520),s<20&&(s=r.bottom+20),s+400>n-20&&(s=20),p.value=t,v.value={x:l,y:s},g.value=!0}),100),f=(0,J.A)((()=>{console.log("关闭商品悬浮框"),g.value=!1,p.value=null}),200),b=e=>{i.pageSize=e,i.pageNum=1,u()},y=e=>{i.pageNum=e,u()};(0,n.wB)((()=>({...i})),(()=>{u()}),{deep:!0}),(0,n.sV)((()=>{u()}));const _=e=>{e?(console.log("跳转到商品详情，ID:",e),d.push({name:"ProductDetail",params:{id:e}})):x.nk.error("商品ID不存在")};(0,n.wB)(t,(e=>{console.log("商品列表数据:",e)}),{deep:!0});const w=e=>{e.imageUrl=m};return(e,a)=>{const o=(0,n.g2)("el-image"),u=(0,n.g2)("el-rate"),d=(0,n.g2)("el-card"),v=(0,n.g2)("el-col"),I=(0,n.g2)("el-row"),C=(0,n.g2)("el-pagination"),F=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("section",be,[a[2]||(a[2]=(0,n.Lk)("div",{class:"title-divider"},[(0,n.Lk)("span",{class:"divider-text magic-text"},"热销商品")],-1)),a[3]||(a[3]=(0,n.Lk)("div",{class:"shooting-star"},null,-1)),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(I,{gutter:20},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(t),(e=>((0,n.uX)(),(0,n.Wv)(v,{key:e.productId,xs:24,sm:12,md:8,lg:6},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"product-card dream-card","body-style":{padding:"0px"},onMouseenter:t=>(0,s.R1)(k)(t,e),onMouseleave:(0,s.R1)(f),onClick:t=>_(e.productId)},{default:(0,n.k6)((()=>[(0,n.bF)(o,{src:e.imageUrl,class:"product-image",fit:"cover",onError:t=>w(e)},{error:(0,n.k6)((()=>[(0,n.bF)(o,{src:(0,s.R1)(m),fit:"cover"},null,8,["src"])])),_:2},1032,["src","onError"]),(0,n.Lk)("div",ye,[(0,n.Lk)("h3",null,(0,l.v_)(e.name),1),(0,n.Lk)("p",_e,(0,l.v_)(e.description),1),(0,n.Lk)("p",we,"¥"+(0,l.v_)(e.price.toFixed(2)),1),(0,n.Lk)("div",Ie,[(0,n.bF)(u,{modelValue:e.rating,"onUpdate:modelValue":t=>e.rating=t,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"]),(0,n.Lk)("span",Ce,"("+(0,l.v_)(e.reviewCount)+")",1)]),(0,n.Lk)("p",Fe,"库存: "+(0,l.v_)(e.stock),1)])])),_:2},1032,["onMouseenter","onMouseleave","onClick"])])),_:2},1024)))),128))])),_:1})),[[F,(0,s.R1)(r)]]),((0,n.uX)(),(0,n.Wv)(n.Im,{to:"body"},[(0,n.bF)(A.eB,{name:"fade"},{default:(0,n.k6)((()=>[g.value?((0,n.uX)(),(0,n.Wv)(fe,{key:0,product:p.value,style:(0,l.Tr)([h.value,{zIndex:9999}]),onMouseleave:(0,s.R1)(f),class:"product-hover-layer"},null,8,["product","style","onMouseleave"])):(0,n.Q3)("",!0)])),_:1})])),(0,n.Lk)("div",Le,[(0,n.bF)(C,{"current-page":(0,s.R1)(i).pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>(0,s.R1)(i).pageNum=e),"page-size":(0,s.R1)(i).pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>(0,s.R1)(i).pageSize=e),total:(0,s.R1)(c).total,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:b,onCurrentChange:y},null,8,["current-page","page-size","total"])])])}}};const Ae=(0,b.A)(Ee,[["__scopeId","data-v-37f42574"]]);var Re=Ae;function xe(){const e=[{label:"默认",value:"default"},{label:"最新",value:"newest",icon:"Timer"},{label:"评分",value:"rating",icon:"StarFilled"},{label:"销量",value:"sales",icon:"Sell"},{label:"价格↑",value:"priceAsc",icon:"SortUp"},{label:"价格↓",value:"priceDesc",icon:"SortDown"}];return{sortOptions:e}}const Se={class:"product-sorter"},Xe={class:"view-mode"};var Te={__name:"ProductSorter",props:{products:{type:Array,default:()=>[]},currentView:{type:String,default:"grid"}},emits:["sort-change","view-change"],setup(e,{emit:t}){const a=t,{sortOptions:r}=xe(),o=(0,s.KR)("default"),c=e=>{const t={Timer:h.Timer,StarFilled:h.StarFilled,Sell:h.Sell,SortUp:h.SortUp,SortDown:h.SortDown};return t[e]},i=e=>{console.log("排序方式变化:",e),o.value=e,a("sort-change",e)},u=e=>{console.log("切换视图模式:",e),a("view-change",e)};return(t,a)=>{const d=(0,n.g2)("el-icon"),m=(0,n.g2)("el-radio-button"),p=(0,n.g2)("el-radio-group"),g=(0,n.g2)("el-button"),v=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",Se,[(0,n.bF)(p,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),size:"large",onChange:i},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(r),(e=>((0,n.uX)(),(0,n.Wv)(m,{key:e.value,label:e.value},{default:(0,n.k6)((()=>[e.icon?((0,n.uX)(),(0,n.Wv)(d,{key:0},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(c(e.icon))))])),_:2},1024)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),(0,n.Lk)("div",Xe,[(0,n.bF)(v,{content:"网格视图",placement:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{type:"grid"===e.currentView?"primary":"default",onClick:a[1]||(a[1]=e=>u("grid")),class:"view-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Grid))])),_:1})])),_:1},8,["type"])])),_:1}),(0,n.bF)(v,{content:"列表视图",placement:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{type:"list"===e.currentView?"primary":"default",onClick:a[2]||(a[2]=e=>u("list")),class:"view-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.List))])),_:1})])),_:1},8,["type"])])),_:1})])])}}};const We=(0,b.A)(Te,[["__scopeId","data-v-4cf4d5aa"]]);var Ke=We;a(7550);function Oe(){const e=(0,s.Kh)({categoryId:null,price:{min:null,max:null},ratings:[],tags:[],keyword:""}),t=[{label:"全部",value:[null,null]},{label:"0-1000",value:[0,1e3]},{label:"1000-3000",value:[1e3,3e3]},{label:"3000-5000",value:[3e3,5e3]},{label:"5000以上",value:[5e3,null]}],a=[{label:"五星",value:5},{label:"四星及以上",value:4},{label:"三星及以上",value:3}],r=(0,s.KR)(["新品","热销","促销","限时","精选"]),o=(t,a)=>{switch(t){case"price":e.price.min=a[0],e.price.max=a[1];break;case"ratings":e.ratings=Array.isArray(a)?a:[a];break;case"tags":e.tags=Array.isArray(a)?a:[a];break;case"category":e.categoryId=a;break;case"keyword":e.keyword=a;break}},n=()=>{Object.assign(e,{categoryId:null,price:{min:null,max:null},ratings:[],tags:[],keyword:""})},l=t=>t.filter((t=>!(null!==e.price.min&&t.price<e.price.min)&&(!(null!==e.price.max&&t.price>e.price.max)&&(!(e.ratings.length&&!e.ratings.some((e=>t.rating>=e)))&&(!(e.tags.length&&!e.tags.some((e=>t.tags?.includes(e))))&&((!e.categoryId||t.categoryId===e.categoryId)&&!(e.keyword&&!t.name.toLowerCase().includes(e.keyword.toLowerCase()))))))));return{filterParams:e,priceRanges:t,ratingOptions:a,tagOptions:r,updateFilter:o,resetFilter:n,applyFilter:l}}const Pe={class:"filter-card dream-card"},De={class:"product-filter"},Ve={class:"filter-section"},Ne={class:"price-range"},Ue={class:"filter-section"},qe={class:"rating-filter"},$e={class:"filter-section"},ze={class:"tags-filter"},Me={class:"filter-actions"};var je={__name:"ProductFilter",emits:["filter-change"],setup(e,{emit:t}){const a=t,{filterParams:r,priceRanges:o,ratingOptions:c,tagOptions:i,updateFilter:u,resetFilter:d}=Oe(),m=(0,s.KR)(r.price),p=c,g=(0,s.KR)([]),v=i,h=(0,s.KR)([]),k=e=>{const t=h.value.indexOf(e);t>-1?h.value.splice(t,1):h.value.push(e),u("tags",h.value)},f=()=>{u("price",[m.value.min,m.value.max]),u("ratings",g.value),a("filter-change",{...r})},b=()=>{d(),m.value=r.price,g.value=[],h.value=[],f()};return(0,n.wB)([m,g,h],(()=>{f()}),{deep:!0}),(e,t)=>{const a=(0,n.g2)("el-input-number"),r=(0,n.g2)("el-rate"),o=(0,n.g2)("el-checkbox"),c=(0,n.g2)("el-checkbox-group"),i=(0,n.g2)("el-tag"),u=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.Lk)("div",De,[(0,n.Lk)("div",Ve,[t[4]||(t[4]=(0,n.Lk)("h3",null,"价格区间",-1)),(0,n.Lk)("div",Ne,[(0,n.bF)(a,{modelValue:m.value.min,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value.min=e),min:0,step:10,placeholder:"最低价"},null,8,["modelValue"]),t[3]||(t[3]=(0,n.Lk)("span",{class:"separator"},"-",-1)),(0,n.bF)(a,{modelValue:m.value.max,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value.max=e),min:0,step:10,placeholder:"最高价"},null,8,["modelValue"])])]),(0,n.Lk)("div",Ue,[t[5]||(t[5]=(0,n.Lk)("h3",null,"商品评分",-1)),(0,n.Lk)("div",qe,[(0,n.bF)(c,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(p),(e=>((0,n.uX)(),(0,n.Wv)(o,{key:e.value,label:e.value},{default:(0,n.k6)((()=>[(0,n.bF)(r,{"model-value":e.value,disabled:"","show-score":""},null,8,["model-value"])])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])]),(0,n.Lk)("div",$e,[t[6]||(t[6]=(0,n.Lk)("h3",null,"商品标签",-1)),(0,n.Lk)("div",ze,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(v),(e=>((0,n.uX)(),(0,n.Wv)(i,{key:e,class:(0,l.C4)({active:h.value.includes(e)}),onClick:t=>k(e),effect:h.value.includes(e)?"dark":"plain"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e),1)])),_:2},1032,["class","onClick","effect"])))),128))])]),(0,n.Lk)("div",Me,[(0,n.bF)(u,{type:"primary",onClick:f},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("应用筛选")]))),_:1}),(0,n.bF)(u,{onClick:b},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("重置")]))),_:1})])])])}}};const Be=(0,b.A)(je,[["__scopeId","data-v-4cace994"]]);var Ge=Be;const He={class:"main-content"},Qe={class:"sticky-sidebar"};var Ye={__name:"index",setup(e){const{isDarkTheme:t}=(0,c.D)(),a=(0,s.KR)("400px"),r=(0,s.KR)("grid"),o=(0,s.Kh)({categoryId:null,price:{min:null,max:null},ratings:[],tags:[]}),i=(0,s.Kh)({field:"default",order:"desc"}),u=e=>{o.keyword=e},d=e=>{o.categoryId=e.categoryId},m=e=>{Object.assign(o,e)},p=e=>{i.field=e},g=e=>{r.value=e};return(0,n.sV)((()=>{console.log("首页组件已加载")})),(e,c)=>{const v=(0,n.g2)("el-col"),h=(0,n.g2)("el-row");return(0,n.uX)(),(0,n.CE)("div",{class:(0,l.C4)(["home-container",{"light-theme":!(0,s.R1)(t)}])},[(0,n.bF)(E,{onSearch:u}),(0,n.Lk)("div",He,[(0,n.bF)(h,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(v,{xs:24,sm:24,md:8,lg:6},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Qe,[(0,n.bF)(N,{"content-height":a.value,onCategoryChange:d},null,8,["content-height"]),(0,n.bF)(Ge,{class:"filter-component",onFilterChange:m})])])),_:1}),(0,n.bF)(v,{xs:24,sm:24,md:16,lg:18},{default:(0,n.k6)((()=>[(0,n.bF)(M,{"content-height":a.value},null,8,["content-height"]),(0,n.bF)(Ke,{class:"sorter-component",onSortChange:p,onViewChange:g}),(0,n.bF)(Re,{"view-mode":r.value,"filter-params":o,"sort-params":i},null,8,["view-mode","filter-params","sort-params"])])),_:1})])),_:1})])],2)}}};const Je=(0,b.A)(Ye,[["__scopeId","data-v-01fe0a45"]]);var Ze=Je;const et={class:"not-found"},tt={class:"container"},at={class:"text-container"};var rt={__name:"NotFound",setup(e){const t=(0,o.rd)(),a=()=>{t.push("/home")};return(e,t)=>{const r=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",et,[(0,n.Lk)("div",tt,[t[3]||(t[3]=(0,n.Fv)('<div class="item" id="pink" data-v-b852bfec><div class="chewing" data-v-b852bfec><div class="eye left" data-v-b852bfec><span data-v-b852bfec></span></div><div class="eye right" data-v-b852bfec><span data-v-b852bfec></span></div><div class="mounth" data-v-b852bfec></div><div class="arm left" data-v-b852bfec></div><div class="arm right" data-v-b852bfec></div></div><div class="shadow" data-v-b852bfec></div></div><div class="item" id="orange" data-v-b852bfec><div class="chewing" data-v-b852bfec><div class="eye left" data-v-b852bfec><span data-v-b852bfec></span></div><div class="eye right" data-v-b852bfec><span data-v-b852bfec></span></div><div class="mounth" data-v-b852bfec></div><div class="arm left" data-v-b852bfec></div><div class="arm right" data-v-b852bfec></div></div><div class="shadow" data-v-b852bfec></div></div><div class="item" id="blue" data-v-b852bfec><div class="chewing" data-v-b852bfec><div class="eye left" data-v-b852bfec><span data-v-b852bfec></span></div><div class="eye right" data-v-b852bfec><span data-v-b852bfec></span></div><div class="mounth" data-v-b852bfec></div><div class="arm left" data-v-b852bfec></div><div class="arm right" data-v-b852bfec></div></div><div class="shadow" data-v-b852bfec></div></div>',3)),(0,n.Lk)("div",at,[t[1]||(t[1]=(0,n.Lk)("h1",null,"404",-1)),t[2]||(t[2]=(0,n.Lk)("p",null,"哎呀...页面走丢了",-1)),(0,n.bF)(r,{onClick:a,type:"primary"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.eW)("返回首页")]))),_:1})])])])}}};const ot=(0,b.A)(rt,[["__scopeId","data-v-b852bfec"]]);var nt=ot;const lt={class:"logo-container"},st={key:0,class:"title"},ct={class:"sidebar-footer"},it={class:"main-content"},ut={class:"admin-header"},dt={class:"breadcrumb"},mt={class:"user-info"},pt={class:"el-dropdown-link"},gt={class:"username"},vt={class:"content-wrapper"};var ht={__name:"index",setup(e){const t=(0,o.rd)(),a=(0,o.lq)(),r=(0,s.KR)(!1),c=(0,s.KR)("true"===localStorage.getItem("isDarkTheme")),u=(0,s.KR)("/admin/dashboard"),d=(0,s.KR)("Admin"),m=(0,s.KR)("https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"),p=(0,n.EW)((()=>{const e={dashboard:"首页","products/list":"商品列表","products/category":"分类管理","products/add":"添加商品","orders/list":"订单列表","orders/stats":"订单统计","users/list":"用户列表","users/roles":"角色管理",settings:"系统设置"},t=a.path.split("/admin/")[1];return e[t]||"数据概览"})),g=()=>{r.value=!r.value},v=()=>{c.value=!c.value,localStorage.setItem("isDarkTheme",c.value),c.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("class","el-popup-parent--hidden dark")):(document.documentElement.classList.remove("dark"),document.body.setAttribute("class","el-popup-parent--hidden"))};(0,n.sV)((()=>{c.value&&(document.documentElement.classList.add("dark"),document.body.setAttribute("class","el-popup-parent--hidden dark"))}));const k=()=>{t.push("/admin/profile")},f=()=>{t.push("/login")},b=(0,s.KR)(window.innerWidth<=768),y=(0,s.KR)(!1),_=()=>{b.value=window.innerWidth<=768,b.value||(y.value=!1)},w=()=>{y.value=!y.value},I=()=>{y.value=!1};return(0,n.wB)(a,(()=>{b.value&&I()})),(0,n.sV)((()=>{window.addEventListener("resize",_),_()})),(0,n.xo)((()=>{window.removeEventListener("resize",_)})),(e,t)=>{const a=(0,n.g2)("el-icon"),o=(0,n.g2)("el-menu-item"),_=(0,n.g2)("el-sub-menu"),C=(0,n.g2)("el-menu"),F=(0,n.g2)("el-button"),L=(0,n.g2)("el-breadcrumb-item"),E=(0,n.g2)("el-breadcrumb"),R=(0,n.g2)("el-avatar"),x=(0,n.g2)("el-dropdown-item"),S=(0,n.g2)("el-dropdown-menu"),X=(0,n.g2)("el-dropdown"),T=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",{class:(0,l.C4)(["admin-container",{dark:c.value}])},[(0,n.Lk)("aside",{class:(0,l.C4)(["sidebar",{collapsed:r.value&&!b.value,mobile:b.value,"mobile-open":y.value}])},[(0,n.Lk)("div",lt,[t[0]||(t[0]=(0,n.Lk)("img",{src:i,alt:"Logo",class:"logo"},null,-1)),r.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",st,"后台管理系统"))]),(0,n.bF)(C,{"default-active":u.value,class:(0,l.C4)(["sidebar-menu",{dark:c.value}]),collapse:r.value,router:""},{default:(0,n.k6)((()=>[(0,n.bF)(o,{index:"/admin/dashboard"},{title:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("数据概览")]))),default:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.DataLine))])),_:1})])),_:1}),(0,n.bF)(_,{index:"products"},{title:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Goods))])),_:1}),t[2]||(t[2]=(0,n.Lk)("span",null,"商品管理",-1))])),default:(0,n.k6)((()=>[(0,n.bF)(o,{index:"/admin/products/list"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("商品列表")]))),_:1}),(0,n.bF)(o,{index:"/admin/products/category"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("分类管理")]))),_:1}),(0,n.bF)(o,{index:"/admin/products/add"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("添加商品")]))),_:1})])),_:1}),(0,n.bF)(_,{index:"orders"},{title:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.List))])),_:1}),t[6]||(t[6]=(0,n.Lk)("span",null,"订单管理",-1))])),default:(0,n.k6)((()=>[(0,n.bF)(o,{index:"/admin/orders/list"},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("订单列表")]))),_:1}),(0,n.bF)(o,{index:"/admin/orders/stats"},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("订单统计")]))),_:1})])),_:1}),(0,n.bF)(_,{index:"users"},{title:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.User))])),_:1}),t[9]||(t[9]=(0,n.Lk)("span",null,"用户管理",-1))])),default:(0,n.k6)((()=>[(0,n.bF)(o,{index:"/admin/users/list"},{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("用户列表")]))),_:1}),(0,n.bF)(o,{index:"/admin/users/roles"},{default:(0,n.k6)((()=>t[11]||(t[11]=[(0,n.eW)("角色管理")]))),_:1})])),_:1}),(0,n.bF)(o,{index:"/admin/settings"},{title:(0,n.k6)((()=>t[12]||(t[12]=[(0,n.eW)("系统设置")]))),default:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Setting))])),_:1})])),_:1})])),_:1},8,["default-active","collapse","class"]),(0,n.Lk)("div",ct,[(0,n.Lk)("button",{class:(0,l.C4)(["theme-toggle",{dark:c.value}]),onClick:v},[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(c.value?"Moon":"Sunny")))])),_:1})],2),(0,n.bF)(F,{class:"collapse-btn",onClick:g},{default:(0,n.k6)((()=>[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(r.value?"Expand":"Fold")))])),_:1})])),_:1})])],2),(0,n.bo)((0,n.Lk)("div",{class:"mobile-overlay",onClick:I},null,512),[[A.aG,b.value&&y.value]]),(0,n.Lk)("div",it,[(0,n.Lk)("header",ut,[(0,n.bo)((0,n.Lk)("button",{class:"mobile-menu-btn",onClick:w},[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Menu))])),_:1})],512),[[A.aG,b.value]]),(0,n.Lk)("div",dt,[(0,n.bF)(E,{separator:"/"},{default:(0,n.k6)((()=>[(0,n.bF)(L,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(p.value),1)])),_:1})])),_:1})]),(0,n.Lk)("div",mt,[(0,n.Lk)("button",{class:"collapse-btn desktop-only",onClick:g},[(0,n.bF)(a,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(r.value?"Expand":"Fold")))])),_:1})]),(0,n.bF)(X,null,{dropdown:(0,n.k6)((()=>[(0,n.bF)(S,null,{default:(0,n.k6)((()=>[(0,n.bF)(x,{onClick:k},{default:(0,n.k6)((()=>t[13]||(t[13]=[(0,n.eW)("个人信息")]))),_:1}),(0,n.bF)(x,{onClick:f},{default:(0,n.k6)((()=>t[14]||(t[14]=[(0,n.eW)("退出登录")]))),_:1})])),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("span",pt,[(0,n.bF)(R,{size:32,src:m.value},null,8,["src"]),(0,n.Lk)("span",gt,(0,l.v_)(d.value),1)])])),_:1})])]),(0,n.Lk)("div",vt,[(0,n.bF)(T)])])],2)}}};const kt=(0,b.A)(ht,[["__scopeId","data-v-29e252a4"]]);var ft=kt,bt=(a(3215),a(3949),a(2933)),yt=a(4180),_t=a(6662);const wt=(0,d.nY)("checkout",{state:()=>({checkoutItems:[]}),actions:{setCheckoutItems(e){this.checkoutItems=e},clearCheckoutItems(){this.checkoutItems=[]}}}),It={class:"cart-container"},Ct={class:"page-header"},Ft={class:"cart-header"},Lt={class:"cart-summary"},Et={class:"highlight"},At={class:"price"},Rt={class:"cart-list"},xt={class:"item-image"},St={class:"image-placeholder"},Xt={class:"item-info"},Tt={class:"item-name"},Wt={class:"item-price"},Kt={class:"item-quantity"},Ot={class:"item-total"},Pt={class:"total-price"},Dt={class:"item-actions"},Vt={key:1,class:"empty-cart"},Nt={key:0,class:"cart-footer"},Ut={class:"select-all"},qt={class:"checkout-info"},$t={class:"total-section"},zt={class:"total-price"};var Mt={__name:"index",setup(e){const t=(0,o.rd)(),a=v(),r=(0,u.k)(),c=(0,_t.x)(),i=wt(),d=(0,s.KR)(!1),m=async()=>{try{const e=await g.getCartItems();if(console.log("购物车商品列表:",e),null===e||Array.isArray(e)&&0===e.length)return x.nk.info("您的购物车是空的，请添加商品。"),void a.setCartItems([]);if(!Array.isArray(e))throw new Error("购物车数据格式错误");e.forEach((e=>{if(!e.cartItemId||!e.productId||!e.quantity)throw new Error("购物车项格式错误")})),a.setCartItems(e)}catch(e){console.error("获取购物车数据失败:",e),x.nk.error(e.message||"获取购物车数据失败")}},p=(0,n.EW)((()=>a.cartItems.filter((e=>e.selected)).length)),h=(0,n.EW)((()=>a.cartItems.reduce(((e,t)=>t.selected?e+t.price*t.quantity:e),0))),k=(0,n.EW)({get:()=>a.cartItems.length&&a.cartItems.every((e=>e.selected)),set:e=>y(e)}),f=async e=>{try{await a.updateCartItem({id:e.cartItemId,quantity:e.quantity})}catch(t){x.nk.error("更新数量失败")}},b=async e=>{try{await bt.s.confirm("确定要删除这个商品吗？","提示",{type:"warning"}),console.log("准备删除购物车商品，ID:",e),await g.deleteCartItem(e),x.nk.success("删除成功"),await m()}catch(t){"cancel"!==t&&(console.error("删除购物车商品失败:",t),x.nk.error("删除失败，请重试"))}},y=e=>{a.cartItems.forEach((t=>{t.selected=e}))},_=()=>{a.updateSelection(a.cartItems)},w=async()=>{const e=a.cartItems.filter((e=>e.selected));if(e.length)try{const a={items:e.map((e=>({productId:e.productId,quantity:e.quantity,price:e.price.toFixed(2),productName:e.productName,imageUrl:e.imageUrl})))};console.log("发送结算请求，请求数据:",a);const r=await g.purchase(a);if(console.log("结算响应:",r),200===r.state){const{orderId:o,totalAmount:n}=r.data;c.currentOrder={orderId:o,totalAmount:n,items:a.items},i.setCheckoutItems(e),t.push(`/payment/${o}/${n}`)}}catch(r){console.error("结算失败:",r),x.nk.error("结算失败，请重试")}else x.nk.warning("请至少选择一件商品进行结算")},I=e=>e?e.startsWith("http")?e:`http://localhost:8088/${e}`:"";return(0,n.sV)((()=>{r.isLoggedIn?m():t.push({path:"/login",query:{redirect:"/cart"}})})),(e,t)=>{const r=(0,n.g2)("HomeFilled"),o=(0,n.g2)("el-icon"),c=(0,n.g2)("el-button"),i=(0,n.g2)("router-link"),u=(0,n.g2)("el-checkbox"),m=(0,n.g2)("Picture"),g=(0,n.g2)("el-image"),v=(0,n.g2)("el-input-number"),C=(0,n.g2)("Delete"),F=(0,n.g2)("ShoppingCart"),L=(0,n.g2)("el-empty"),E=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",It,[(0,n.Lk)("div",Ct,[(0,n.bF)(i,{to:"/home",class:"back-home"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{type:"primary",class:"home-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1}),t[1]||(t[1]=(0,n.eW)(" 返回主页 "))])),_:1})])),_:1}),t[2]||(t[2]=(0,n.Lk)("h1",{class:"cyber-text"},"我的购物车",-1))]),(0,n.Lk)("div",Ft,[(0,n.Lk)("div",Lt,[t[3]||(t[3]=(0,n.eW)(" 已选择 ")),(0,n.Lk)("span",Et,(0,l.v_)(p.value),1),t[4]||(t[4]=(0,n.eW)(" 件商品 总计: ")),(0,n.Lk)("span",At,"¥"+(0,l.v_)(h.value.toFixed(2)),1)])]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Rt,[(0,s.R1)(a).cartItems.length?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)((0,s.R1)(a).cartItems,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"cart-item",key:e.cartItemId},[(0,n.bF)(u,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,onChange:_},null,8,["modelValue","onUpdate:modelValue"]),(0,n.Lk)("div",xt,[(0,n.bF)(g,{src:I(e.imageUrl||e.product.imageUrl),fit:"cover",class:"product-image"},{error:(0,n.k6)((()=>[(0,n.Lk)("div",St,[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(m)])),_:1})])])),_:2},1032,["src"])]),(0,n.Lk)("div",Xt,[(0,n.Lk)("h3",Tt,(0,l.v_)(e.productName),1),(0,n.Lk)("p",Wt,"¥"+(0,l.v_)(e.price.toFixed(2)),1),(0,n.Lk)("p",null,"数量: "+(0,l.v_)(e.quantity),1)]),(0,n.Lk)("div",Kt,[(0,n.bF)(v,{modelValue:e.quantity,"onUpdate:modelValue":t=>e.quantity=t,min:1,max:e.product?e.product.stock:1,onChange:t=>f(e)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),(0,n.Lk)("div",Ot,[(0,n.Lk)("p",Pt," ¥"+(0,l.v_)((e.price*e.quantity).toFixed(2)),1)]),(0,n.Lk)("div",Dt,[(0,n.bF)(c,{type:"danger",circle:"",onClick:t=>b(e.cartItemId)},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(C)])),_:1})])),_:2},1032,["onClick"])])])))),128)):((0,n.uX)(),(0,n.CE)("div",Vt,[(0,n.bF)(L,{description:"购物车是空的"},{image:(0,n.k6)((()=>[(0,n.bF)(o,{class:"empty-icon"},{default:(0,n.k6)((()=>[(0,n.bF)(F)])),_:1})])),description:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.Lk)("p",null,"您的购物车还是空的，快去选购心仪的商品吧！",-1)]))),default:(0,n.k6)((()=>[(0,n.bF)(i,{to:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{type:"primary"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("去购物")]))),_:1})])),_:1})])),_:1})]))])),[[E,d.value]]),(0,s.R1)(a).cartItems.length?((0,n.uX)(),(0,n.CE)("div",Nt,[(0,n.Lk)("div",Ut,[(0,n.bF)(u,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),onChange:y},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)(" 全选 ")]))),_:1},8,["modelValue"])]),(0,n.Lk)("div",qt,[(0,n.Lk)("div",$t,[t[8]||(t[8]=(0,n.Lk)("span",null,"总计:",-1)),(0,n.Lk)("span",zt,"¥"+(0,l.v_)(h.value.toFixed(2)),1)]),(0,n.bF)(c,{type:"primary",disabled:!p.value,onClick:w,class:"checkout-btn hologram-btn"},{default:(0,n.k6)((()=>[(0,n.eW)(" 结算 ("+(0,l.v_)(p.value)+") ",1)])),_:1},8,["disabled"])])])):(0,n.Q3)("",!0)])}}};const jt=(0,b.A)(Mt,[["__scopeId","data-v-195cfb36"]]);var Bt=jt;a(1419);const Gt={key:0,class:"product-detail"},Ht={class:"product-gallery"},Qt={class:"image-placeholder"},Yt={class:"product-info"},Jt={class:"product-title magic-text"},Zt={class:"price-box"},ea={class:"current-price"},ta={class:"rating-box"},aa={class:"review-count"},ra={key:0,class:"tags-section"},oa={class:"quantity-section"},na={class:"action-buttons"},la={class:"product-details"},sa={class:"detail-content"},ca={class:"parameters"},ia={class:"param-value"},ua={class:"param-value"},da=["innerHTML"],ma={key:1,class:"loading-placeholder"};var pa={__name:"ProductDetail",setup(e){const t=(0,o.lq)(),r=(0,o.rd)(),c=t.params.id,i=(0,u.k)(),d=(0,_t.x)(),m=(0,R.n)();console.log("获取到的商品ID:",c);const p=(0,s.KR)(null),g=a(3206),v=((0,n.EW)((()=>p.value?.rating||0)),(0,n.EW)((()=>p.value?.tags?p.value.tags.split(","):[]))),k=(0,n.EW)((()=>{if(!p.value?.categoryId)return"";const e=m.getCategoryById(p.value.categoryId);return e?.name||""})),f=(0,n.EW)((()=>Math.max(p.value?.stock||0,1))),b=(0,s.KR)(1);(0,n.wB)((()=>p.value?.stock),(e=>{e<b.value&&(b.value=Math.max(Math.min(e,1),1))}));const y=(0,s.KR)(!1),_=async()=>{y.value=!0;try{if(console.log("正在获取商品详情，ID:",c),!c)throw new Error("商品ID不存在");const e=await B(c);if(console.log("商品详情响应:",e),!e)throw new Error("获取商品详情失败");p.value={...e.data.product,images:e.data.images.map((e=>e.replace(/^http:\/\/localhost:8088\/products\/images\/http:\/\/localhost:8088\/products\/images\//,"http://localhost:8088/products/images/")))},console.log("商品数据已更新:",p.value)}catch(e){console.error("获取商品详情失败:",e),x.nk.error(e.message||"获取商品详情失败")}finally{y.value=!1}},w=async()=>{try{if(!i.isLoggedIn)return x.nk.warning("请先登录"),void r.push({path:"/login",query:{redirect:t.fullPath}});if(!p.value?.stock)return void x.nk.warning("商品暂时无货");const e={productId:c,quantity:b.value};await G(e),x.nk.success("已添加到购物车")}catch(e){console.error("添加到购物车失败:",e),x.nk.error("添加失败，请重试")}},I=async()=>{try{if(!i.isLoggedIn)return x.nk.warning("请先登录"),void r.push({path:"/login",query:{redirect:t.fullPath}});if(!p.value?.stock)return void x.nk.warning("商品暂时无货");console.log("发送立即购买请求参数:",{productId:String(c),quantity:b.value});const e=await yt.Ay.purchaseDirectly(c,b.value);if(console.log("立即购买完整响应:",e),e){const{orderId:t,totalAmount:a}=e;d.setCurrentOrder({orderId:t,totalAmount:a,productName:p.value.name,productImage:p.value.images[0]||p.value.imageUrl}),r.push(`/payment/${t}/${a}`)}}catch(e){console.error("立即购买失败:",e),x.nk.error(e.message||"购买失败，请重试")}},C=()=>{p.value&&p.value.images&&(p.value.images=[g])};return(0,n.sV)((()=>{console.log("商品详情页面加载，ID:",c),_()})),(e,t)=>{const a=(0,n.g2)("el-image"),r=(0,n.g2)("el-rate"),o=(0,n.g2)("el-tag"),c=(0,n.g2)("el-input-number"),i=(0,n.g2)("el-icon"),u=(0,n.g2)("el-button"),d=(0,n.g2)("el-skeleton");return p.value?((0,n.uX)(),(0,n.CE)("div",Gt,[(0,n.Lk)("div",Ht,[p.value.images&&p.value.images.length?((0,n.uX)(),(0,n.Wv)(a,{key:0,src:p.value.images[0],fit:"contain",class:"product-main-image","preview-src-list":p.value.images,onError:C},{error:(0,n.k6)((()=>[(0,n.Lk)("div",Qt,[(0,n.bF)(a,{src:(0,s.R1)(g),fit:"contain"},null,8,["src"])])])),_:1},8,["src","preview-src-list"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Yt,[(0,n.Lk)("h1",Jt,(0,l.v_)(p.value.name),1),(0,n.Lk)("div",Zt,[(0,n.Lk)("span",ea,"¥"+(0,l.v_)(p.value.price?.toFixed(2)),1)]),(0,n.Lk)("div",ta,[(0,n.bF)(r,{"model-value":p.value.rating||0,disabled:"","show-score":""},null,8,["model-value"]),(0,n.Lk)("span",aa,"("+(0,l.v_)(p.value.reviewCount||0)+"条评价)",1)]),p.value.tags?((0,n.uX)(),(0,n.CE)("div",ra,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(v.value,(e=>((0,n.uX)(),(0,n.Wv)(o,{key:e,class:"product-tag"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e),1)])),_:2},1024)))),128))])):(0,n.Q3)("",!0),(0,n.Lk)("div",oa,[t[1]||(t[1]=(0,n.Lk)("h3",null,"购买数量",-1)),(0,n.bF)(c,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),min:1,max:f.value,class:"quantity-input",disabled:!p.value.stock},null,8,["modelValue","max","disabled"]),(0,n.Lk)("span",{class:(0,l.C4)(["stock-info",{"out-of-stock":!p.value.stock}])},(0,l.v_)(p.value.stock?`库存: ${p.value.stock}件`:"暂时无货"),3)]),(0,n.Lk)("div",na,[(0,n.bF)(u,{class:"add-to-cart-btn hologram-btn glow-effect",onClick:w},{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.ShoppingCart))])),_:1}),t[2]||(t[2]=(0,n.eW)(" 加入购物车 "))])),_:1}),(0,n.bF)(u,{type:"primary",class:"buy-now-btn hologram-btn glow-effect",onClick:I},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" 立即购买 ")]))),_:1})]),(0,n.Lk)("div",la,[t[7]||(t[7]=(0,n.Lk)("h2",null,"商品详情",-1)),(0,n.Lk)("div",sa,[(0,n.Lk)("div",ca,[t[6]||(t[6]=(0,n.Lk)("h3",null,"规格参数",-1)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[t[4]||(t[4]=(0,n.Lk)("span",{class:"param-name"},"品牌:",-1)),(0,n.Lk)("span",ia,(0,l.v_)(p.value.brand),1)]),(0,n.Lk)("li",null,[t[5]||(t[5]=(0,n.Lk)("span",{class:"param-name"},"分类:",-1)),(0,n.Lk)("span",ua,(0,l.v_)(k.value),1)])])]),(0,n.Lk)("div",{class:"description",innerHTML:p.value.description},null,8,da)])])])])):((0,n.uX)(),(0,n.CE)("div",ma,[(0,n.bF)(d,{rows:3,animated:""})]))}}};const ga=(0,b.A)(pa,[["__scopeId","data-v-4db9a07a"]]);var va=ga;const ha={class:"checkout-container dream-card"},ka={class:"page-header"},fa={key:0},ba={class:"product-list"},ya={class:"checkout-actions"},_a={key:1};var wa={__name:"index",setup(e){const t=(0,o.rd)(),a=wt(),r=(0,s.KR)([]),c=(0,s.KR)(!1),i=a.checkoutItems;console.log("1. 结算页面接收到的商品信息:",i);const u=async()=>{if(!i.length)return console.log("2. 没有收到商品信息"),x.nk.warning("没有选择要结算的商品"),void t.push("/cart");for(const t of i)if(console.log("3. 处理商品:",t),t.productId)try{const e=await B(t.productId);console.log("4. 获取到的商品详情:",e),r.value.push({...e,cartItemId:t.cartItemId,quantity:t.quantity,price:t.price})}catch(e){console.error("获取产品详情失败:",e),x.nk.error(`获取商品 ${t.productName} 的详情失败`)}else console.error("无效的商品ID:",t);console.log("5. 最终的商品详情列表:",r.value)};(0,n.sV)((()=>{u()})),(0,n.hi)((()=>{a.clearCheckoutItems()}));const d=async()=>{c.value=!0;try{const e={items:r.value.map((e=>({productId:e.productId,quantity:e.quantity,price:e.price})))},a=await(0,yt.fS)(e),o=a.cartItemId,n=a.price*a.quantity;t.push(`/payment/${o}/${n}`)}catch(e){console.error("创建订单失败:",e),x.nk.error("创建订单失败，请重试")}finally{c.value=!1}};return(e,t)=>{const a=(0,n.g2)("HomeFilled"),o=(0,n.g2)("el-icon"),s=(0,n.g2)("el-button"),i=(0,n.g2)("router-link"),u=(0,n.g2)("el-empty");return(0,n.uX)(),(0,n.CE)("div",ha,[(0,n.Lk)("div",ka,[(0,n.bF)(i,{to:"/home",class:"back-home"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{type:"primary",class:"home-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)(a)])),_:1}),t[0]||(t[0]=(0,n.eW)(" 返回主页 "))])),_:1})])),_:1}),t[1]||(t[1]=(0,n.Lk)("h1",{class:"cyber-text"},"结算",-1))]),r.value.length?((0,n.uX)(),(0,n.CE)("div",fa,[t[4]||(t[4]=(0,n.Lk)("h2",null,"您选择的商品:",-1)),(0,n.Lk)("ul",ba,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.cartItemId,class:"product-item"},(0,l.v_)(e.productName)+" - 数量: "+(0,l.v_)(e.quantity)+" - 价格: ¥"+(0,l.v_)(e.price),1)))),128))]),(0,n.Lk)("div",ya,[(0,n.bF)(s,{type:"primary",onClick:d,loading:c.value},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)(" 确认支付 ")]))),_:1},8,["loading"]),(0,n.bF)(i,{to:"/cart"},{default:(0,n.k6)((()=>[(0,n.bF)(s,null,{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("返回购物车")]))),_:1})])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",_a,[(0,n.bF)(u,{description:"没有选择商品"})]))])}}};const Ia=(0,b.A)(wa,[["__scopeId","data-v-78916a2d"]]);var Ca=Ia;const Fa=()=>{const e=Date.now().toString(),t=Math.random().toString(36).substr(2,8);return`PAY${e}${t}`.toUpperCase()},La={class:"payment-container dream-card"},Ea={class:"page-header"},Aa={class:"payment-content"},Ra={class:"order-info"},xa={class:"payment-actions"};var Sa={__name:"index",setup(e){const t=(0,o.lq)(),a=(0,o.rd)(),r=(0,_t.x)(),c=(0,s.KR)(!1),i=(0,s.KR)(!1),u=t.params.orderId,d=t.params.totalAmount,m=(0,s.KR)(r.currentOrder),p=(0,s.KR)([]);console.log("支付页面信息:",{routeParams:{orderId:u,totalAmount:d},orderInfo:m.value}),(0,n.sV)((()=>{if(!u||!d||!m.value)return x.nk.error("订单信息不完整"),void a.push("/cart");p.value=m.value.items||[]}));const g=async()=>{try{const e=Fa(),t=await r.payCurrentOrder(e);200===t.state&&(x.nk.success("支付成功！"),a.push("/profile/orders"))}catch(e){x.nk.error(e.message||"支付失败")}},v=()=>{x.nk.warning("取消支付"),a.push("/profile/orders")};return(e,t)=>{const a=(0,n.g2)("HomeFilled"),r=(0,n.g2)("el-icon"),o=(0,n.g2)("el-button"),m=(0,n.g2)("router-link"),h=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",La,[(0,n.Lk)("div",Ea,[(0,n.bF)(m,{to:"/home",class:"back-home"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{type:"primary",class:"home-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.bF)(a)])),_:1}),t[0]||(t[0]=(0,n.eW)(" 返回主页 "))])),_:1})])),_:1}),t[1]||(t[1]=(0,n.Lk)("h1",{class:"cyber-text"},"订单支付",-1))]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Aa,[(0,n.Lk)("div",Ra,[t[2]||(t[2]=(0,n.Lk)("h2",null,"订单信息",-1)),(0,n.Lk)("p",null,"订单号："+(0,l.v_)((0,s.R1)(u)),1),(0,n.Lk)("p",null,"支付金额：¥"+(0,l.v_)((0,s.R1)(d)),1),t[3]||(t[3]=(0,n.Lk)("h3",null,"商品详情:",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(p.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.cartItemId},(0,l.v_)(e.productName)+" - 数量: "+(0,l.v_)(e.quantity)+" - 价格: ¥"+(0,l.v_)(e.price),1)))),128))])]),(0,n.Lk)("div",xa,[(0,n.bF)(o,{type:"primary",onClick:g,loading:i.value,class:"pay-btn"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" 确认支付 ")]))),_:1},8,["loading"]),(0,n.bF)(o,{onClick:v},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("取消支付")]))),_:1})])])),[[h,c.value]])])}}};const Xa=(0,b.A)(Sa,[["__scopeId","data-v-75d91292"]]);var Ta=Xa;const Wa={class:"order-list"},Ka={class:"order-header"},Oa={class:"order-id"},Pa={class:"order-content"},Da={class:"image-placeholder"},Va={class:"product-info"},Na={class:"quantity"},Ua={class:"price"},qa={class:"order-footer"},$a={class:"total-amount"},za={class:"price"},Ma={class:"order-actions"},ja={key:0,class:"empty-state"};var Ba={__name:"OrderList",props:{orders:{type:Array,required:!0}},setup(e){const t=e,a=(0,o.rd)(),r=((0,_t.x)(),(0,s.KR)(!1)),c={CREATED:"已创建",PENDING_PAY:"待支付",PAYING:"支付中",PAID:"已支付",CANCELLED:"已取消",EXPIRED:"已过期"},i=e=>c[e]||e,u=e=>({"status-created":"CREATED"===e,"status-pending":"PENDING_PAY"===e,"status-paying":"PAYING"===e,"status-paid":"PAID"===e,"status-cancelled":"CANCELLED"===e,"status-expired":"EXPIRED"===e});(0,n.wB)((()=>t.orders),(e=>{console.log("订单列表更新:",e)}),{deep:!0});const d=e=>{a.push(`/payment/${e.orderId}/${e.totalAmount}`)},m=async e=>{try{await bt.s.confirm("确定要取消该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=await yt.Ay.cancelOrder(e.orderId);200===t.state&&(x.nk.success("订单已取消"),emit("refresh"))}catch(t){"cancel"!==t&&(console.error("取消订单失败:",t),x.nk.error("取消订单失败"))}},p=e=>e?e.startsWith("http")?e:`http://localhost:8088/${e}`:"";return(t,a)=>{const o=(0,n.g2)("el-icon"),c=(0,n.g2)("el-image"),g=(0,n.g2)("el-button"),v=(0,n.g2)("el-empty"),k=(0,n.gN)("loading");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Wa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.orders,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.orderId,class:"order-item"},[(0,n.Lk)("div",Ka,[(0,n.Lk)("span",Oa,"订单号："+(0,l.v_)(e.orderId),1),(0,n.Lk)("span",{class:(0,l.C4)(["order-status",u(e.status)])},(0,l.v_)(i(e.status)),3)]),(0,n.Lk)("div",Pa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.items,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.productId,class:"product-item"},[(0,n.bF)(c,{src:p(e.imageUrl),fit:"cover",class:"product-image"},{error:(0,n.k6)((()=>[(0,n.Lk)("div",Da,[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.Picture))])),_:1})])])),_:2},1032,["src"]),(0,n.Lk)("div",Va,[(0,n.Lk)("h3",null,(0,l.v_)(e.productName),1),(0,n.Lk)("p",Na,"数量："+(0,l.v_)(e.quantity),1),(0,n.Lk)("p",Ua,"¥"+(0,l.v_)(e.price.toFixed(2)),1)])])))),128))]),(0,n.Lk)("div",qa,[(0,n.Lk)("div",$a,[a[0]||(a[0]=(0,n.eW)(" 总计：")),(0,n.Lk)("span",za,"¥"+(0,l.v_)(e.totalAmount.toFixed(2)),1)]),(0,n.Lk)("div",Ma,[e.isPaid?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(g,{key:0,type:"primary",class:"pay-btn",onClick:t=>d(e)},{default:(0,n.k6)((()=>a[1]||(a[1]=[(0,n.eW)(" 立即支付 ")]))),_:2},1032,["onClick"])),"PENDING_PAY"===e.status?((0,n.uX)(),(0,n.Wv)(g,{key:1,type:"danger",onClick:t=>m(e)},{default:(0,n.k6)((()=>a[2]||(a[2]=[(0,n.eW)(" 取消订单 ")]))),_:2},1032,["onClick"])):(0,n.Q3)("",!0)])])])))),128)),e.orders.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",ja,[(0,n.bF)(v,{description:"暂无订单"})]))])),[[k,r.value]])}}};const Ga=(0,b.A)(Ba,[["__scopeId","data-v-46ae1918"]]);var Ha=Ga;const Qa={class:"orders-container"},Ya={class:"page-header"},Ja={class:"order-tabs"};var Za={__name:"index",setup(e){(0,o.rd)();const t=(0,_t.x)(),a=(0,s.KR)("all"),r=(0,s.KR)([]),l=(0,s.KR)(!1),c=(0,n.EW)((()=>{switch(a.value){case"unpaid":return r.value.filter((e=>!e.isPaid));case"paid":return r.value.filter((e=>e.isPaid));default:return r.value}})),i=async()=>{l.value=!0;try{const e=await yt.Ay.getOrderList();200===e.state&&(r.value=e.data,t.orderList=e.data)}catch(e){console.error("获取订单列表失败:",e),x.nk.error("获取订单列表失败")}finally{l.value=!1}};(0,n.wB)((()=>t.orderList),(e=>{r.value=e}),{deep:!0});const u=()=>{};return(0,n.sV)((()=>{i()})),(e,t)=>{const r=(0,n.g2)("el-icon"),o=(0,n.g2)("el-button"),l=(0,n.g2)("router-link"),i=(0,n.g2)("el-tab-pane"),d=(0,n.g2)("el-tabs");return(0,n.uX)(),(0,n.CE)("div",Qa,[(0,n.Lk)("div",Ya,[(0,n.bF)(l,{to:"/home",class:"back-home"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{type:"primary",class:"home-btn"},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(h.HomeFilled))])),_:1}),t[1]||(t[1]=(0,n.eW)(" 返回主页 "))])),_:1})])),_:1}),t[2]||(t[2]=(0,n.Lk)("h1",{class:"cyber-text"},"我的订单",-1))]),(0,n.Lk)("div",Ja,[(0,n.bF)(d,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onTabClick:u},{default:(0,n.k6)((()=>[(0,n.bF)(i,{label:"全部订单",name:"all"},{default:(0,n.k6)((()=>[(0,n.bF)(Ha,{orders:c.value},null,8,["orders"])])),_:1}),(0,n.bF)(i,{label:"待支付",name:"unpaid"},{default:(0,n.k6)((()=>[(0,n.bF)(Ha,{orders:c.value},null,8,["orders"])])),_:1}),(0,n.bF)(i,{label:"已支付",name:"paid"},{default:(0,n.k6)((()=>[(0,n.bF)(Ha,{orders:c.value},null,8,["orders"])])),_:1})])),_:1},8,["modelValue"])])])}}};const er=(0,b.A)(Za,[["__scopeId","data-v-5403e930"]]);var tr=er;const ar=[{path:"/",redirect:"/home",meta:{requiresAuth:!1}},{path:"/home",name:"Home",component:Ze,meta:{requiresAuth:!1}},{path:"/cart",name:"Cart",component:Bt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:()=>a.e(301).then(a.bind(a,8682)),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:()=>a.e(289).then(a.bind(a,1289)),meta:{requiresAuth:!1}},{path:"/profile",name:"Profile",component:()=>a.e(376).then(a.bind(a,8376)),meta:{requiresAuth:!0}},{path:"/profile/orders",name:"UserOrders",component:tr,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:nt},{path:"/admin",name:"admin",component:ft,children:[{path:"",name:"dashboard",component:()=>a.e(479).then(a.bind(a,1860))},{path:"products",name:"product-list",component:()=>a.e(357).then(a.bind(a,3357))},{path:"products/category",name:"product-category",component:()=>a.e(552).then(a.bind(a,4552))},{path:"products/add",name:"product-add",component:()=>a.e(545).then(a.bind(a,4545))},{path:"orders",name:"order-list",component:()=>a.e(397).then(a.bind(a,7397))},{path:"orders/stats",name:"order-stats",component:()=>a.e(834).then(a.bind(a,4453))},{path:"users",name:"user-list",component:()=>a.e(440).then(a.bind(a,8440))},{path:"users/roles",name:"user-roles",component:()=>a.e(804).then(a.bind(a,4804))},{path:"settings",name:"settings",component:()=>a.e(225).then(a.bind(a,225))},{path:"profile",name:"admin-profile",component:()=>a.e(759).then(a.bind(a,8759))}],beforeEnter:(e,t,a)=>{const r="true"===localStorage.getItem("isAdmin");r?a():a("/login")}},{path:"/product/:id",name:"ProductDetail",component:va,props:!0,beforeEnter:(e,t,a)=>{console.log("路由参数:",e.params),e.params.id?a():a("/home")}},{path:"/checkout",name:"Checkout",component:Ca,meta:{requiresAuth:!0}},{path:"/payment/:orderId/:totalAmount",name:"Payment",component:Ta,props:!0,meta:{requiresAuth:!0}}],rr=(0,o.aE)({history:(0,o.LA)("/"),routes:ar});rr.beforeEach((async(e,t,a)=>{const r=(0,u.k)();if("/"!==e.path)if(e.meta.requiresAuth){const t=localStorage.getItem("accessToken"),o=localStorage.getItem("refreshToken");t&&o?(r.isLoggedIn||await r.initializeFromStorage(),a()):a({path:"/login",query:{redirect:e.fullPath}})}else a();else a("/home")}));var or=rr},3840:function(e,t,a){a.d(t,{n:function(){return l}});a(8992),a(4520),a(2577);var r=a(2261),o=a(5720);const n=()=>(0,o.A)({url:"/categories",method:"GET"}),l=(0,r.nY)("category",{state:()=>({categories:[],loading:!1,error:null}),getters:{topLevelCategories:e=>e.categories.filter((e=>!e.parentCategoryId)),getChildCategories:e=>t=>e.categories.filter((e=>e.parentCategoryId===t))},actions:{async fetchCategories(){this.loading=!0,this.error=null;try{const e=await n();if(200!==e.state)throw new Error(e.message||"获取分类失败");return this.categories=e.data,e.data}catch(e){throw this.error=e.message||"获取分类失败",e}finally{this.loading=!1}},getCategoryById(e){return this.categories.find((t=>t.categoryId===e))},getCategoryPath(e){const t=[];let a=this.getCategoryById(e);while(a)t.unshift(a),a=this.getCategoryById(a.parentCategoryId);return t}}})},6662:function(e,t,a){a.d(t,{x:function(){return n}});a(8992),a(2577),a(1454);var r=a(2261),o=a(4180);const n=(0,r.nY)("order",{state:()=>({currentOrder:null,orderList:[],loading:!1,error:null,pagination:{page:1,size:10,total:0}}),actions:{updateOrderStatus(e,t){console.log("更新订单状态:",e,t);const a=this.orderList.find((t=>t.orderId===e));a?(console.log("找到订单，更新状态"),a.status=t,this.orderList=[...this.orderList]):(console.log("未找到订单"),this.fetchOrderList())},async createNewOrder(e){this.loading=!0,this.error=null;try{const t=await(0,o.fS)(e);return this.currentOrder={...t,items:e.items.map((e=>({...e,imageUrl:e.imageUrl,productName:e.productName})))},t}catch(t){throw this.error=t.response?.data?.error||{message:"创建订单失败"},t}finally{this.loading=!1}},async payCurrentOrder(e){this.loading=!0,this.error=null;try{const t=this.currentOrder.orderId,a={paymentId:e};console.log("支付订单:",{orderId:t,paymentData:a});const r=await(0,o.Tg)(t,a);if(200===r.state)return this.updateOrderStatus(t,"PAID"),this.clearCurrentOrder(),r;throw new Error(r.message||"支付失败")}catch(t){throw this.error=t.response?.data?.error||{message:"支付处理失败"},t}finally{this.loading=!1}},async fetchOrderList(e={}){this.loading=!0,console.log("Fetching order list with params:",e);try{const t=await(0,o.n7)({page:this.pagination.page,size:this.pagination.size,...e});return this.orderList=t.data,this.pagination.total=t.total,t}catch(t){throw this.error=t.response?.data?.error||{message:"获取订单列表失败"},t}finally{this.loading=!1}},async fetchOrderDetail(e){this.loading=!0;try{const t=await(0,o.KU)(e);return this.currentOrder=t,t}catch(t){throw this.error=t.response?.data?.error||{message:"获取订单详情失败"},t}finally{this.loading=!1}},async cancelOrder(e){this.loading=!0;try{const t=await(0,o.N4)(e);return this.currentOrder?.orderId===e&&(this.currentOrder.status="CANCELLED"),t}catch(t){throw this.error=t.response?.data?.error||{message:"取消订单失败"},t}finally{this.loading=!1}},setCurrentOrder(e){this.currentOrder=e},clearCurrentOrder(){this.currentOrder=null}}})},4783:function(e,t,a){a.d(t,{k:function(){return s}});a(4114);var r=a(2261),o=a(3603),n=a(4218),l=a(1219);const s=(0,r.nY)("user",{state:()=>({userInfo:null,_isLoggedIn:!1}),getters:{isLoggedIn:e=>e._isLoggedIn},actions:{setUserInfo(e){this.userInfo=e,this._isLoggedIn=!0,localStorage.setItem("userInfo",JSON.stringify(e))},storeTokens(e){const{accessToken:t,refreshToken:a}=e;localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",a)},clearTokens(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},async login(e){try{const t=await(0,o.iD)(e);if(200===t.state&&t.data){const{accessToken:a,refreshToken:r}=t.data;if(!a||!r)throw new Error(t.message||"登录响应中缺少 token");this.storeTokens(t.data),console.log("Tokens saved:",{accessToken:a,refreshToken:r});const o={username:e.username};return this.setUserInfo(o),!0}throw new Error(t.message||"登录响应格式错误")}catch(t){throw console.error("登录失败:",t),new Error(t.response?.data?.message||t.message||"登录失败")}},clearUserState(){this.userInfo=null,this._isLoggedIn=!1,localStorage.removeItem("userInfo"),this.clearTokens()},async logout(){try{const e=localStorage.getItem("refreshToken");if(e){const t=await(0,o.ri)({refreshToken:e});l.nk.success(t.message||"登出成功")}}catch(e){console.error("登出请求失败:",e),l.nk.error(e.response?.data?.message||"登出失败")}finally{this.clearUserState(),n.A.push("/login")}},async validateToken(){try{const e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");if(!e||!t)return!1;const a=await(0,o.ug)();return 200===a.state&&(this.setUserInfo(a.data),!0)}catch(e){return console.error("Token 验证失败:",e),!1}},async initializeFromStorage(){const e=localStorage.getItem("userInfo"),t=localStorage.getItem("accessToken"),a=localStorage.getItem("refreshToken");return!!(e&&t&&a)&&(this.userInfo=JSON.parse(e),this._isLoggedIn=!0,!0)}}})},3603:function(e,t,a){a.d(t,{iD:function(){return l},kz:function(){return s},ri:function(){return i},ug:function(){return c}});a(4114);var r=a(5720),o=a(1419),n=a(4218);const l=async e=>{try{const t=await(0,r.A)({url:"/auth/login",method:"POST",data:e,withCredentials:!0});return t}catch(t){throw console.error("登录请求失败:",t),t}},s=async e=>{try{const t=await(0,r.A)({url:"/users/reg",method:"post",data:e});if(200!==t.state)throw new Error(t.message||"注册失败");return t}catch(t){throw console.error("Register error:",t),t.response?new Error(t.response.data?.message||"注册失败"):t.request?new Error("网络请求失败，请检查网络连接"):new Error(t.message||"注册失败")}},c=async()=>{try{const e=await(0,r.A)({url:"/users/info",method:"get"});return e}catch(e){throw console.error("Get user info error:",e),e}},i=async()=>{try{await(0,r.A)({url:"/auth/logout",method:"POST",withCredentials:!0})}catch(e){console.error("登出请求失败:",e)}finally{(0,o.zs)("token"),localStorage.removeItem("userInfo"),n.A.push("/login")}}},1419:function(e,t,a){a.d(t,{Ri:function(){return o},zs:function(){return n}});var r=a(8704);const o=e=>{try{const t=r.A.get(e);return console.log(`Cookie get: ${e}=${t}`),t}catch(t){return console.error("获取 cookie 失败:",t),null}},n=e=>{try{r.A.remove(e,{path:"/",sameSite:"Lax"})}catch(t){console.error("删除 Cookie 时出错:",t)}}},5720:function(e,t,a){a(4114),a(8992),a(3949);var r=a(8355),o=(a(1419),a(4218)),n=a(1219),l=a(4783);const s=r.A.create({baseURL:"http://localhost:8088",timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});s.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));const c=async()=>{try{const e=localStorage.getItem("refreshToken"),t=await r.A.post("http://localhost:8088/auth/refresh",{refreshToken:e},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(200===t.data.state){const{accessToken:e,refreshToken:a}=t.data.data;return localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",a),e}throw new Error("刷新 token 失败")}catch(e){throw console.error("刷新 token 失败:",e),e}};let i=!1,u=[];s.interceptors.response.use((e=>e.data),(async e=>{const t=e.config;if(401===e.response?.status&&!t._retry){if(i)return new Promise((e=>{u.push((a=>{t.headers.Authorization=`Bearer ${a}`,e(s(t))}))}));t._retry=!0,i=!0;try{const e=await c();return u.forEach((t=>t(e))),u=[],t.headers.Authorization=`Bearer ${e}`,s(t)}catch(a){const e=(0,l.k)();return e.clearUserState(),o.A.push("/login"),n.nk.error("登录已过期，请重新登录"),Promise.reject(a)}finally{i=!1}}return n.nk.error(e.response?.data?.message||"请求失败"),Promise.reject(e)})),t.A=s},505:function(e,t,a){a.d(t,{D:function(){return n}});var r=a(6768),o=a(144);function n(){return(0,r.sV)((()=>{document.documentElement.classList.add("dream-theme")})),{isDarkTheme:(0,o.KR)(!0)}}},3206:function(e,t,a){e.exports=a.p+"img/cs.26c28f1f.png"}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,n){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],n=e[u][2];for(var s=!0,c=0;c<r.length;c++)(!1&n||l>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(s=!1,n<l&&(l=n));if(s){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{225:"3dc0c3fc",289:"006e6828",301:"40b45125",357:"617afec9",376:"89c84ea9",397:"f82188c9",440:"0c682543",479:"b9a265cc",545:"e49360ea",552:"db00c846",759:"0ec1a25c",804:"41cfc0be",834:"ae9f6a38"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{289:"b9fc04d2",301:"31eaf7ec",376:"6018fffd"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="store:";a.l=function(r,o,n,l){if(e[r])e[r].push(o);else{var s,c;if(void 0!==n)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var d=i[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+n){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+n),s.src=r),e[r]=[o];var m=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,o,n){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",a.nc&&(l.nonce=a.nc);var s=function(a){if(l.onerror=l.onload=null,"load"===a.type)o();else{var r=a&&a.type,s=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=s,l.parentNode&&l.parentNode.removeChild(l),n(c)}};return l.onerror=l.onload=s,l.href=t,r?r.parentNode.insertBefore(l,r.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=a[r],n=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===t))return o}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){o=l[r],n=o.getAttribute("data-href");if(n===e||n===t)return o}},r=function(r){return new Promise((function(o,n){var l=a.miniCssF(r),s=a.p+l;if(t(l,s))return o();e(r,s,null,o,n)}))},o={524:0};a.f.miniCss=function(e,t){var a={289:1,301:1,376:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,r){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(a,r){o=e[t]=[a,r]}));r.push(o[2]=n);var l=a.p+a.u(t),s=new Error,c=function(r){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",s.name="ChunkLoadError",s.type=n,s.request=l,o[1](s)}};a.l(l,c,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,n,l=r[0],s=r[1],c=r[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(c)var u=c(a)}for(t&&t(r);i<l.length;i++)n=l[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},r=self["webpackChunkstore"]=self["webpackChunkstore"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(3230)}));r=a.O(r)})();
//# sourceMappingURL=app.794341b0.js.map